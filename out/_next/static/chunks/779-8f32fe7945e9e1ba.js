"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[779],{1332:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(8520),o=t.n(r),s=t(5893),a=t(7294),c=t(3251),u=t(8527),i=t(9762),l=t(4612),d=t(5113),f=t(5885),h=t(3766),x=t(9669),p=t.n(x);function m(e,n,t,r,o,s,a){try{var c=e[s](a),u=c.value}catch(i){return void t(i)}c.done?n(u):Promise.resolve(u).then(r,o)}var v,g={login:(v=o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().post("/api/login",n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,r){var o=v.apply(e,n);function s(e){m(o,t,r,s,a,"next",e)}function a(e){m(o,t,r,s,a,"throw",e)}s(void 0)}))})},j=t(14);function w(e,n,t,r,o,s,a){try{var c=e[s](a),u=c.value}catch(i){return void t(i)}c.done?n(u):Promise.resolve(u).then(r,o)}var b=new f.Z,k=function(e){var n=(0,a.useState)(""),t=n[0],r=n[1],f=(0,a.useState)(""),x=f[0],p=f[1],m=(0,a.useState)(""),v=m[0],k=m[1],C=(0,a.useState)(""),S=C[0],y=C[1],Z=(0,a.useState)([]),z=(Z[0],Z[1]),P=(0,a.useState)(!1),I=P[0],W=P[1],A=(0,c.pm)();(0,a.useEffect)((function(){h.Z.getAll().then((function(e){z(e)}))}),[]);var E=function(){W((function(e){return!e}))},q=function(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var s=e.apply(n,t);function a(e){w(s,r,o,a,c,"next",e)}function c(e){w(s,r,o,a,c,"throw",e)}a(void 0)}))}}(o().mark((function e(n){var s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),I){e.next=20;break}return e.prev=2,e.next=5,g.login({username:t,password:x});case 5:s=e.sent,console.log(s),b.set("token",s.token),b.set("username",s.username),b.set("name",s.name),j.Z.setToken(s.token),window.location.reload(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),A({description:"Wrong Credentials - try again",isClosable:!0,status:"error"}),console.log(e.t0);case 18:e.next=21;break;case 20:x!==v?A({description:"passwords do not match! - please retry",status:"error",isClosable:!0}):(a={username:t,name:S,password:x},h.Z.create(a),A({description:"Succesfully created account",isClosable:!0}),p(""),k(""),r(""),y(""),E());case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return(0,s.jsx)(u.W2,{maxW:"65%",children:(0,s.jsxs)(u.xu,{children:[(0,s.jsx)(u.xv,{fontWeight:"bold",fontSize:"20px",mb:5,children:I?"Sign Up":"Sign In"}),(0,s.jsxs)(i.NI,{id:"signup",isRequired:!0,children:[I&&(0,s.jsxs)("div",{children:[(0,s.jsx)(i.lX,{children:"Full Name"}),(0,s.jsx)(l.II,{bgColor:"white",type:"text",onChange:function(e){y(e.target.value)},value:S})]}),(0,s.jsx)(i.lX,{children:"Username"}),(0,s.jsx)(l.II,{bgColor:"white",type:"text",onChange:function(e){r(e.target.value)},value:t}),(0,s.jsx)(i.lX,{children:"Password"}),(0,s.jsx)(l.II,{bgColor:"white",type:"password",onChange:function(e){p(e.target.value)},value:x}),I&&(0,s.jsxs)("div",{children:[(0,s.jsx)(i.lX,{children:"Verify Password"}),(0,s.jsx)(l.II,{bgColor:"white",type:"password",onChange:function(e){k(e.target.value)},value:v})]}),(0,s.jsx)(d.zx,{onClick:q,mt:3,bgColor:"#86da75",type:"submit",children:I?"Create Account":"Sign In"})]}),(0,s.jsxs)(u.xu,{mt:5,children:[I?"Already have an account? ":"Don't have an account? ",(0,s.jsx)("span",{onClick:E,children:(0,s.jsx)(d.zx,{size:"xs",children:I?"Sign In":"Sign Up"})})]})]})})}},779:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(5893),o=t(8527),s=t(7294),a=t(1332),c=t(14),u=t(3766),i=t(3251),l=t(5684),d=t(9762),f=t(3441),h=t(5113),x=t(5885),p=function(e){var n=e.createPost,t=(0,s.useState)(""),a=t[0],c=t[1],u=(0,i.pm)(),p=new x.Z;return(0,r.jsx)(o.W2,{maxW:"75%",mb:5,children:(0,r.jsx)(o.xu,{bgColor:"#eaeaeb",p:5,align:"right",children:(0,r.jsxs)(o.kC,{children:[(0,r.jsx)(l.qE,{name:p.get("username")}),(0,r.jsxs)(d.NI,{onSubmit:n,children:[(0,r.jsx)(f.g,{resize:"none",value:a,bgColor:"#edecee",placeholder:"Share a new post with users!",onChange:function(e){c(e.target.value)}}),(0,r.jsx)(h.zx,{mt:3,bgColor:"#86da75",type:"submit",onClick:function(e){e.preventDefault(),n({content:a,user_id:p.get("id"),likes:0,comments:[]}),u({description:"Success - posted new content!"}),c("")},children:"Post"})]})]})})})},m=t(894),v=t(2453),g=function(e){var n=e.comment,t=e.user;return(0,r.jsxs)(o.kC,{bgColor:"#eaeaeb",children:[(0,r.jsx)(l.qE,{size:"sm",name:t}),(0,r.jsxs)(o.xv,{ml:2,fontWeight:"bold",children:[t,":"]}),(0,r.jsx)(o.xv,{pl:2,children:n})]})},j=new x.Z,w=function(e){var n=e.post,t=e.addComment,a=(0,s.useState)(""),c=a[0],u=a[1],l=(0,i.pm)();return(0,r.jsx)(d.NI,{children:(0,r.jsxs)(o.kC,{children:[(0,r.jsx)(f.g,{bgColor:"#edecee",minH:"unset",placeholder:"Leave a comment here",size:"sm",resize:"none",value:c,onChange:function(e){u(e.target.value)}}),(0,r.jsx)(h.zx,{onClick:function(e){e.preventDefault();var r={comment:c,user:j.get("username")};t(r,n.id),u(""),l({description:"added comment"})},bgColor:"#86da75",type:"submit",size:"sm",ml:3,children:"comment"})]})})},b=function(e){var n=e.post,t=(e.refreshComments,(0,s.useState)([])),a=t[0],u=t[1],i=(0,s.useState)(0),d=i[0],f=i[1];(0,s.useEffect)((function(){c.Z.getAll().then((function(e){u(n.comments),f(n.likes)}))}),[]);return(0,r.jsxs)(o.xu,{shadow:"md",borderWidth:"1px",borderRadius:"md",p:5,flex:"1",mb:10,bgColor:"#eaeaeb",children:[(0,r.jsxs)(o.Eq,{mb:3,children:[(0,r.jsx)(l.qE,{name:n.user.username}),(0,r.jsx)(o.xv,{pl:3,fontWeight:"bold",children:n.user.name}),(0,r.jsx)(o.xv,{children:n.date})]}),(0,r.jsx)(o.xv,{children:n.content}),(0,r.jsx)(o.xu,{pt:3,children:(0,r.jsxs)(o.kC,{children:[(0,r.jsx)(h.zx,{size:"xs",onClick:function(){c.Z.likePost(n.id).then((function(e){console.log(e),f(e.likes+1)}))},children:(0,r.jsx)(m.JO,{as:v.XLq})}),(0,r.jsxs)(o.xv,{px:2,children:[d," likes"]})]})}),(0,r.jsx)(o.xu,{pt:5,mx:5,shadow:"md",children:a.map((function(e){return(0,r.jsx)(g,{id:e.id,comment:e.comment,user:e.user})}))}),(0,r.jsx)(o.xu,{px:10,pt:5,children:(0,r.jsx)(w,{post:n,addComment:function(e,n){c.Z.createComment(n,e).then((function(n){u(a.concat({comment:e.comment,user:e.user}))}))}})})]})},k=function(){var e=(0,s.useState)([]),n=e[0],t=e[1],a=(0,s.useState)([]),i=a[0],l=a[1],d=(0,s.useState)([]),f=(d[0],d[1],new x.Z);(0,s.useEffect)((function(){c.Z.getAll().then((function(e){t(e.sort((function(e,n){return e.date-n.date})))}))}),[]),(0,s.useEffect)((function(){u.Z.getUser(f.get("token")).then((function(e){return l(e)}))}),[]),(0,s.useEffect)((function(){c.Z.setToken(f.get("token"))}),[]);var h=function(){c.Z.getAll().then((function(e){t(e)}))};return(0,r.jsxs)(o.xu,{children:[(0,r.jsx)(p,{minW:"55%",createPost:function(e){c.Z.createPost(e).then((function(e){t(n.concat(e))}))}}),n.filter((function(e){return e.user.friends.includes(i.id)||e.user.id===i.id})).sort((function(e,n){return n-e})).map((function(e){return(0,r.jsx)(b,{post:e,refreshComments:h},e.id)}))]})},C=(new x.Z).get("token"),S=function(){var e=(0,s.useState)(null);e[0],e[1];return C?(0,r.jsx)(o.W2,{maxW:"100%",children:(0,r.jsx)(k,{})}):(0,r.jsx)(o.W2,{maxW:"100%",children:(0,r.jsx)(a.Z,{})})}},14:function(e,n,t){var r=t(8520),o=t.n(r),s=t(9669),a=t.n(s);function c(e,n,t,r,o,s,a){try{var c=e[s](a),u=c.value}catch(i){return void t(i)}c.done?n(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var s=e.apply(n,t);function a(e){c(s,r,o,a,u,"next",e)}function u(e){c(s,r,o,a,u,"throw",e)}a(void 0)}))}}var i="/api/posts",l=null,d=u(o().mark((function e(n){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:l}},e.next=3,a().post(i,n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)}))),f=u(o().mark((function e(n,t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().put("".concat(i,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),h=u(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().put("".concat(i,"/like/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));n.Z={getAll:function(){return a().get(i).then((function(e){return e.data}))},createPost:d,createComment:f,setToken:function(e){l="bearer ".concat(e)},likePost:h}},3766:function(e,n,t){var r=t(8520),o=t.n(r),s=t(9669),a=t.n(s);function c(e,n,t,r,o,s,a){try{var c=e[s](a),u=c.value}catch(i){return void t(i)}c.done?n(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var s=e.apply(n,t);function a(e){c(s,r,o,a,u,"next",e)}function u(e){c(s,r,o,a,u,"throw",e)}a(void 0)}))}}var i="/api/users",l=null,d=u(o().mark((function e(n){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:n}},console.log("getUser service",n),r=a().get("".concat(i,"/getUser"),t),console.log("recieved request"),e.abrupt("return",r.then((function(e){return e.data})));case 5:case"end":return e.stop()}}),e)}))),f=u(o().mark((function e(n){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:l}},e.next=3,a().post(i,n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)}))),h=u(o().mark((function e(n,t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{headers:{Authorization:t}},console.log(n,t),e.next=4,a().post("".concat(i,"/accept/").concat(n),{cookieToken:t});case 4:e.sent;case 5:case"end":return e.stop()}}),e)}))),x=u(o().mark((function e(n,t){var r,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:l}},console.log(n),e.next=4,a().post("".concat(i,"/").concat(n),t,r);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));n.Z={create:f,getAll:function(){return a().get(i).then((function(e){return e.data}))},addFriend:x,setToken:function(e){l="bearer ".concat(e)},getUser:d,getFriend:function(e){return console.log("userservice ",e),a().get("".concat(i,"/requester/").concat(e)).then((function(e){return e.data}))},acceptRequest:h}}}]);